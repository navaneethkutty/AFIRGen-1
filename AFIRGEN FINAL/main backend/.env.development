# AFIRGen Backend - Development Environment Configuration
# This configuration is optimized for local development

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
SERVICE_NAME=afirgen-backend-dev
ENVIRONMENT=development
DEBUG=true

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_OUTPUT=stdout
# Enable verbose logging for specific modules during development
LOG_MODULE_LEVELS=infrastructure.database=DEBUG,services=DEBUG,repositories=DEBUG

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_HOST=localhost
DB_PORT=3306
DB_USER=afirgen_user
DB_PASSWORD=dev_password
DB_NAME=afirgen_dev
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false  # Set to true to log all SQL queries

# ============================================================================
# REDIS CACHE CONFIGURATION
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300
CELERY_WORKER_PREFETCH_MULTIPLIER=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_WORKER_POOL=prefork
CELERY_WORKER_CONCURRENCY=2

# ============================================================================
# MODEL SERVERS CONFIGURATION
# ============================================================================
MODEL_SERVER_URL=http://localhost:8001
ASR_OCR_SERVER_URL=http://localhost:8002
MODEL_SERVER_TIMEOUT=120
MODEL_SERVER_MAX_RETRIES=3

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1  # Single worker for easier debugging
API_RELOAD=true  # Enable auto-reload on code changes
API_KEY=dev-api-key-change-me

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=false  # Disable for development
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_WINDOW_SECONDS=60

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
CORS_ENABLED=true
CORS_ORIGINS=*  # Allow all origins in development
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
SECRET_KEY=dev-secret-key-not-for-production
REQUIRE_HTTPS=false

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================
MAX_UPLOAD_SIZE_MB=50
ALLOWED_AUDIO_TYPES=audio/wav,audio/mpeg,audio/mp4,audio/ogg,audio/flac
ALLOWED_IMAGE_TYPES=image/png,image/jpeg,image/webp
UPLOAD_DIR=/tmp/afirgen_uploads

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# ============================================================================
# TRACING CONFIGURATION (OpenTelemetry)
# ============================================================================
OTEL_ENABLED=false  # Disable tracing in development
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=afirgen-backend-dev
OTEL_TRACES_SAMPLER=always_on
OTEL_TRACES_SAMPLER_ARG=1.0

# ============================================================================
# CACHE TTL CONFIGURATION (seconds)
# ============================================================================
CACHE_TTL_FIR_RECORD=3600
CACHE_TTL_SESSION=86400
CACHE_TTL_KB_QUERY=7200
CACHE_TTL_VIOLATION_CHECK=1800
CACHE_TTL_STATS=300

# ============================================================================
# RETRY CONFIGURATION
# ============================================================================
RETRY_MAX_ATTEMPTS=3
RETRY_BASE_DELAY=1.0
RETRY_MAX_DELAY=60.0
RETRY_EXPONENTIAL_BASE=2.0
RETRY_JITTER=true

# ============================================================================
# CIRCUIT BREAKER CONFIGURATION
# ============================================================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================
# Enable SQL query logging
SQL_ECHO=false

# Enable request/response logging
LOG_REQUESTS=true
LOG_RESPONSES=true

# Enable performance profiling
ENABLE_PROFILING=false

# Enable debug toolbar (if implemented)
DEBUG_TOOLBAR=false
